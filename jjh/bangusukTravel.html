<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Bangusuk Travel</title>
  <style type="text/css">
    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    #map,
    #pano {
      float: left;
      height: 100%;
      width: 50%;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="pano"></div>
  <div id="position-cell"></div>
  <button id="shot">screen shot</button>
</body>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script src="script/script.js"></script>
  <!-- <script src="script/bundle.js"></script> -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY&callback=initialize&libraries=&v=weekly"
  defer
  ></script>
  <script>
  $(function(){
    $("#shot").on("click",function(){
      // html2canvas(document.querySelector(".widget-scene-canvas")).then(canvas => {
      //   saveAs(canvas.toDataURL('image/png'),"capture-test.png");
    //     });
        var screenshot = {};
        html2canvas(document.getElementById("pano"),{
          useCORS: true,
          onrendered: function (canvas) {
            console.log("!")
            // var tempcanvas = document.createElement('canvas');
            // tempcanvas.width=1350;
            // tempcanvas.height=700;
            // var context = tempcanvas.getContext('2d');
            // context.drawImage(canvas,0,0,1350,700,0,0,1350,700);
            // var link = document.createElement('a');
            // link.href = tempcanvas.toDataURL('image/jpg');
            // link.download = 'screenshot.jpg';
            // link.click();
            // savaAs(href,download);
          }
        })
        .then(canvas => saveAs(canvas.toDataURL('image/png'),"capture-test.png"))
        ;
      // console.log("~")
      // $(".gm-style svg").css("visibility","hidden")
      //  html2canvas( $(".gm-style svg"),{
      //     useCORS: true,
      //     onrendered: function(canvas)
      //     {
      //       $(".gm-style svg").css("visibility","visible")
      //       var dataUrl= canvas.toDataURL('image/png');
            
      //     }
      //   }).then(canvas => saveAs(dataUrl,"capture_test.png"));
      });
      function saveAs(uri, filename){
        var link = document.createElement('a');
        if (typeof link.download === 'string'){
          link.href = uri;
          link.download = filename;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }else{
          window.open(uri);
        }
      }
    });
  </script>
</html>